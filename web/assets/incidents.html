<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Histórico de Incidentes - Sistema de Monitoreo</title>
    <link rel="stylesheet" href="css/estilos_barra_menu.css">
    <link rel="stylesheet" href="css/historial.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css">
</head>
<body>

    <header>
        <div class="superior">
            <div class="search">
                <br><h1>Historial de incidentes</h1><br>
            </div>
        </div>

        <div class="container__menu">
            <nav>
                <ul>
                    <li><a href="menu.html"></a></li>
                    <li><a href="live-view.html" >Vista en tiempo real</a></li>
                    <li><a href="" id="selected">Historico de incidentes</a></li>
                    <li><a href="statistics.html" >Estadisticas</a></li>
                    <li><a href="admin.php" >Administracion</a></li>
                    <li><a href="ayuda.html" >Ayuda</a></li>
                    <li><a onclick="window.location.href='../../index.html'">cerrar sesion</a></li>
                </ul>
            </nav>
        </div>
    </header><br>

    <div class="dashboard">
        <!-- Sidebar (igual que en dashboard.html) -->
        <!-- ... -->
        
        <!-- Main Content -->
        <div class="main-content">
            

                <div class="header-actions">
                    <div class="date-filter">
                        <input type="date" id="startDate">
                        <span>a</span>
                        <input type="date" id="endDate">
                        <button class="btn-filter">Filtrar</button>
                    </div>
                    <button class="btn btn-primary" id="exportBtn">
                        <i class="fas fa-file-export"></i> Exportar
                    </button>
                </div>
            
            <div class="content">
                <div class="incidents-table-container">
                    <table id="incidentsTable" class="display">
                        <thead>
                            <tr>
                                <th>Fecha/Hora</th>
                                <th>Ubicación</th>
                                <th>Tipo</th>
                                <th>Severidad</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2023-06-15 10:15:23</td>
                                <td>Patio Principal</td>
                                <td>Agresión Física</td>
                                <td><span class="severity-high">Alta</span></td>
                                <td><span class="status-resolved">Resuelto</span></td>
                                <td>
                                    <button class="btn-action view"><i class="fas fa-eye"></i></button>
                                    <button class="btn-action download"><i class="fas fa-download"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td>2023-06-15 09:30:45</td>
                                <td>Entrada Principal</td>
                                <td>Actividad Sospechosa</td>
                                <td><span class="severity-medium">Media</span></td>
                                <td><span class="status-pending">Pendiente</span></td>
                                <td>
                                    <button class="btn-action view"><i class="fas fa-eye"></i></button>
                                    <button class="btn-action download"><i class="fas fa-download"></i></button>
                                </td>
                            </tr>
                            <!-- Más filas de incidentes -->
                        </tbody>
                    </table>
                </div>
                
                <div class="incident-detail-modal" id="detailModal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Detalles del Incidente</h2>
                            <button class="close-modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="video-container">
                                <video controls>
                                    <source src="videos/incident_20230615_101523.mp4" type="video/mp4">
                                    Tu navegador no soporta videos HTML5.
                                </video>
                            </div>
                            <div class="incident-info">
                                <h3>Información del Incidente</h3>
                                <div class="info-grid">
                                    <div class="info-item">
                                        <label>Fecha y Hora:</label>
                                        <p>2023-06-15 10:15:23</p>
                                    </div>
                                    <div class="info-item">
                                        <label>Ubicación:</label>
                                        <p>Patio Principal</p>
                                    </div>
                                    <div class="info-item">
                                        <label>Tipo:</label>
                                        <p>Agresión Física</p>
                                    </div>
                                    <div class="info-item">
                                        <label>Severidad:</label>
                                        <p class="severity-high">Alta</p>
                                    </div>
                                    <div class="info-item">
                                        <label>Estado:</label>
                                        <p class="status-resolved">Resuelto</p>
                                    </div>
                                    <div class="info-item full-width">
                                        <label>Descripción:</label>
                                        <p>El sistema detectó una posible agresión física entre dos estudiantes en el área del patio principal.</p>
                                    </div>
                                    <div class="info-item full-width">
                                        <label>Acciones Tomadas:</label>
                                        <textarea>Se intervino inmediatamente y se reportó a los padres de los estudiantes involucrados.</textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary close-modal">Cerrar</button>
                            <button class="btn btn-primary">Guardar Cambios</button>
                            <button class="btn btn-danger">Eliminar Incidente</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
    <script src="js/main.js"></script>
    <script>
        $(document).ready(function() {
            $('#incidentsTable').DataTable({
                "order": [[0, "desc"]],
                "language": {
                    "url": "//cdn.datatables.net/plug-ins/1.11.3/i18n/es_es.json"
                }
            });
            
            // Abrir modal al hacer clic en Ver
            $('.btn-action.view').click(function() {
                $('#detailModal').fadeIn();
            });
            
            // Cerrar modal
            $('.close-modal').click(function() {
                $('#detailModal').fadeOut();
            });
        });
    </script>
</body>
</html>